<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Basic Usage - FluidPatcher</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Basic Usage";
        var mkdocs_page_input_path = "basic_usage.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> FluidPatcher
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Basic Usage</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#config-files">Config Files</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fluidpatcher_guipyw">fluidpatcher_gui.pyw</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fluidpatcher_clipy">fluidpatcher_cli.py</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../soundfonts/">Soundfonts</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../bank_files/">Creating Banks</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ladspa_plugins/">Plugins</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../api_reference/">API Reference</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">FluidPatcher</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Basic Usage</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/GeekFunkLabs/fluidpatcher/edit/master/docs/basic_usage.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="basic-usage">Basic Usage</h1>
<p>This section explains how to use the scripts included in this repository, and in general how programs written using FluidPatcher should work. In most cases, one can connect a MIDI keyboard or controller, run a FluidPatcher program, and start playing notes to generate audio. Banks, soundfonts, and midi files can be copied from one program or device to another and provide the same sounds and performances.</p>
<h2 id="config-files">Config Files</h2>
<p>A config file allows the user provide settings specific to different programs or platforms, and is also used by programs to store settings and states. Config files are plain text in YAML format, which here means settings are just listed as <code>&lt;name&gt;: &lt;value&gt;</code> (the space after <code>:</code> is required). The scripts in this repository look for <code>config/fluidpatcherconf.yaml</code> by default, but will use a different file if it is passed as a command-line argument.</p>
<p>This is an example config file:</p>
<pre><code class="language-yaml">bankdir: config/banks
soundfontdir: config/sf2
mfilesdir: config/midi
fluidsettings:
  midi.autoconnect: 1
  player.reset-synth: 0
  synth.gain: 0.6
currentbank: bank1.yaml
</code></pre>
<p>All settings are optional, unrecognized settings will be ignored, and the order is flexible. Here are the common settings:</p>
<ul>
<li><code>bankdir</code> - directory prefix when loading/saving banks; can be relative to the program directory or absolute; defaults to <code>banks</code></li>
<li><code>soundfontdir</code> - directory prefix for soundfonts; defaults to <code>{bankdir}/../sf2</code></li>
<li><code>mfilesdir</code> - directory prefix for MIDI files; defaults to <code>{bankdir}/../midi</code></li>
<li><code>plugindir</code> - directory prefix for LADSPA plugins, see <a href="../ladspa_plugins/">Plugins</a> for details</li>
<li><code>fluidsettings</code> - indented list of settings to pass directly to FluidSynth.</li>
<li><code>currentbank</code> - used by most programs to store the last bank opened, so it can be loaded next time the program starts</li>
</ul>
<p>FluidSynth maintains a <a href="https://www.fluidsynth.org/api/fluidsettings.xml">full list of fluidsynth settings</a> with explanations and defaults by platform. Here are some notes on a few important ones:</p>
<ul>
<li><code>midi.autoconnect</code> - automatically connects MIDI keyboards/controllers. This does not work on all systems. In some cases (Windows), controllers may need to be connected before the program is started, or connected manually.</li>
<li><code>player.reset-synth</code> - When playing a MIDI file and reaching the end of a song, all playing notes will be silenced and the synth reset, overriding settings in banks and patches. This is undesirable for FluidPatcher and should be set to 0.</li>
<li><code>synth.gain</code> - scales the output volume of the synth. This can be in the range 0.0-10.0, but values above 1.0 will be clipped/distorted.</li>
<li><code>synth.polyphony</code> - If too many voices are played at once (usually by sustaining lots of notes), the CPU may terminate audio while it catches up. This limits the number of active voices, canceling the oldest notes.</li>
<li><code>audio.periods</code>, <code>audio.period-size</code> - These set the number and size of the buffers used for sending digital audio. Lowering these values decreases audio latency (the time between playing a note and hearing the audio), but too low and the sound card won't be able to keep up, producing stuttering/crackling audio.</li>
</ul>
<h2 id="fluidpatcher_guipyw">fluidpatcher_gui.pyw</h2>
<p>This is a desktop (GUI) program that can be used to edit and test bank files, or as a live software synthesizer. The main UI consists of a display showing the current bank and patch, and buttons for switching patches or loading the next available bank. The menus provide options for loading/saving bank files, and selecting patches. The <em>Tools</em> menu provides useful functions:</p>
<ul>
<li><em>Edit Bank</em> - Opens a separate text editor window in which the current bank can be edited directly. Clicking "Apply" will scan the text and update the bank, or pop up a message if there are errors.</li>
<li><em>Choose Preset</em> - Opens a soundfont, and allows the user to scroll through and play the soundfont's presets. Double-clicking or clicking <em>OK</em> will paste the selected preset into the bank file.</li>
<li><em>MIDI Monitor</em> - Opens a window that will display received MIDI messages</li>
<li><em>Fill Screen</em> - Hides the menu bar and maximizes the main UI. Can be useful in live playing.</li>
<li><em>Settings</em> - Opens a dialog for viewing and editing the contents of the current config file.</li>
</ul>
<p>Some program settings, such as the initial height, width, and font size of the UI, can be adjusted by editing the script and changing the values of <code>WIDTH</code>, <code>HEIGHT</code>, <code>FONTSIZE</code>, <code>PAD</code>, and/or <code>FILLSCREEN</code> at the beginning of the file.</p>
<h2 id="fluidpatcher_clipy">fluidpatcher_cli.py</h2>
<p>This program works from the command line, even in a remote terminal. It lets you load banks, choose patches, and play the synthesizer. The keyboard is used to control the interface and choose options. Here is the list of commands:</p>
<ul>
<li><code>N</code> and <code>P</code> choose the next/previous patch</li>
<li><code>L</code> loads the next bank, in alphabetical order</li>
<li><code>M</code> toggles monitoring of MIDI messages</li>
<li><code>E</code> opens the current bank in a text editor</li>
<li><code>Q</code> exits the program</li>
</ul>
<p>Any other key will print out the list of keyboard commands.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../soundfonts/" class="btn btn-neutral float-right" title="Soundfonts">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/GeekFunkLabs/fluidpatcher" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../soundfonts/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
