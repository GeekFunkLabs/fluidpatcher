names:
  mychan: 1 # midi channel of your controller
  slider1: 13 # CC of a slider
  pad1: 50 # CC of a momentary button
  pad2: 51 # CC of a momentary button
  modwheel: 1
  volume: 7
  glide_msb: 5
  glide_lsb: 37
  glide_pedal: 65

patches:
  VelFilter:
    # filter notes by velocity
    1: test.sf2:000:004
    2: test.sf2:000:005
    rules:
    - {type: note, chan: mychan=1, val: 0-116}
    - {type: note, chan: mychan=2, val: 117-127}
    - {type: note, chan: mychan=2, val: 0}
      # route note releases for the second sound

  TypeRoute:
    # midi messages can be converted to other types
    3: test.sf2:000:067
    rules:
    - {type: note, chan: mychan=3, num: 0-127*1-12}
      # alternate min-max*mul+add route allows shifting all values
    - {type: cpress=ctrl, chan: mychan=3, num: modwheel}
      # convert channel pressure/aftertouch to modulation

  IncVolume:
    # named counters can be referenced by multiple rules
    4: test.sf2:000:007
    rules:
    - {type: ctrl, chan: mychan=4, num: pad1=7, val: 127=-10, counter: vol}
    - {type: ctrl, chan: mychan=4, num: pad2=7, val: 127=10, counter: vol}
      # momentary CCs 12, 13 increment counter, value is sent to CC#7
      # val parameter sets increment amount
    - {type: note, chan: mychan=4}

  Glide:
    # send MSB and LSB of a value to different CCs
    # also use a logarithmic curve to make the slider more responsive
    5: test.sf2:000:081
    rules:
    - {type: note, chan: mychan=5}
    - {type: ctrl, chan: mychan=5, num: slider1=glide_msb, lsb: glide_lsb,
       val: 0-127=0-1000, log: 2.5}

counters:
  vol: {min: 0, max: 120, startval: 70, wrap: no}

init:
    messages:
    - ctrl:4:volume:70
      # set chan 4 volume to startval of IncVolume counter
    - ctrl:5:glide_pedal:64
      # turn on portamento on channel 5

